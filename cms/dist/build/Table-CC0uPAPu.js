import{r as T,u as E,a as x,Q as v,b,bk as w,j as e,bU as s,bM as A,I as m,T as L,_ as U,bK as f,Z as I,o as B,bD as N,bL as P,aH as H,l as _,aG as G}from"./strapi-D0ivxu6x.js";import{R as C}from"./RelativeTime-BX3f58ib.js";const Z=a=>T.useEffect(a,O),O=[],J=({permissions:a,headers:n=[],isLoading:o=!1,tokens:l=[],onConfirmDelete:i,tokenType:r})=>{const[{query:d}]=E(),{formatMessage:D,locale:k}=x(),[,M]=d&&d.sort?d.sort.split(":"):[void 0,"ASC"],R=v(),{trackUsage:S}=b(),u=w(k),g=[...l].sort((t,c)=>M==="DESC"?u.compare(c.name,t.name):u.compare(t.name,c.name)),{canDelete:p,canUpdate:j,canRead:h}=a,y=t=>()=>{h&&(S("willEditTokenFromList",{tokenType:r}),R(t.toString()))};return e.jsx(s.Root,{headers:n,rows:g,isLoading:o,children:e.jsxs(s.Content,{children:[e.jsx(s.Head,{children:n.map(t=>e.jsx(s.HeaderCell,{...t},t.name))}),e.jsx(s.Empty,{}),e.jsx(s.Loading,{}),e.jsx(s.Body,{children:g.map(t=>{const c=t.name==="Read Only"?A.apiTokens.ManageAPIToken:T.Fragment;return e.jsxs(s.Row,{onClick:y(t.id),children:[e.jsx(s.Cell,{maxWidth:"25rem",children:e.jsx(m,{textColor:"neutral800",fontWeight:"bold",ellipsis:!0,children:t.name})}),e.jsx(s.Cell,{maxWidth:"25rem",children:e.jsx(m,{textColor:"neutral800",ellipsis:!0,children:t.description})}),e.jsx(s.Cell,{children:e.jsx(m,{textColor:"neutral800",children:e.jsx(C,{timestamp:new Date(t.createdAt)})})}),e.jsx(s.Cell,{children:t.lastUsedAt&&e.jsx(m,{textColor:"neutral800",children:e.jsx(C,{timestamp:new Date(t.lastUsedAt),customIntervals:[{unit:"hours",threshold:1,text:D({id:"Settings.apiTokens.lastHour",defaultMessage:"last hour"})}]})})}),j||h||p?e.jsx(s.Cell,{children:e.jsxs(L,{justifyContent:"end",children:[e.jsx(c,{children:j&&e.jsx(q,{tokenName:t.name,tokenId:t.id})}),p&&e.jsx($,{tokenName:t.name,onClickDelete:()=>i?.(t.id),tokenType:r})]})}):null]},t.id)})})]})})},Q={edit:{id:"app.component.table.edit",defaultMessage:"Edit {target}"},read:{id:"app.component.table.read",defaultMessage:"Read {target}"}},W=({tokenName:a,tokenId:n,buttonType:o="edit",children:l})=>{const{formatMessage:i}=x();return e.jsx(F,{tag:H,to:n.toString(),onClick:r=>r.stopPropagation(),title:i(Q[o],{target:a}),variant:"ghost",size:"S",children:l})},F=_(G)`
  padding: 0.7rem;

  & > span {
    display: flex;
  }
`,$=({tokenName:a,onClickDelete:n,tokenType:o})=>{const{formatMessage:l}=x(),{trackUsage:i}=b(),r=()=>{i("willDeleteToken",{tokenType:o}),n()};return e.jsx(f.Root,{children:e.jsxs(I,{paddingLeft:1,onClick:d=>d.stopPropagation(),children:[e.jsx(f.Trigger,{children:e.jsx(B,{label:l({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${a}`}),name:"delete",variant:"ghost",children:e.jsx(N,{})})}),e.jsx(P,{onConfirm:r})]})})},q=({tokenName:a,tokenId:n})=>e.jsx(W,{tokenName:a,tokenId:n,children:e.jsx(U,{})});export{J as T,Z as u};
