const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["strapi-D0ivxu6x.js","strapi-D6821bIJ.css"])))=>i.map(i=>d[i]);
import{fh as O,fi as U,fj as $,fk as G,fl as D,fm as H,fn as V,aP as W,fo as K,fp as R,fq as q,r as j,a3 as z,dj as J,ak as Z,k as I,fr as Q,bz as X,M as Y,a as B,b as ss,aN as ns,bS as as,j as a,dU as p,bo as N,fs as es,l as ts,a5 as is,aJ as rs,dV as os,P as k,aO as ls,L as cs,Z as ds,ck as P,bx as us,dW as ms}from"./strapi-D0ivxu6x.js";import{_ as gs}from"./_baseMap-DodTm9XW.js";import{s as ps}from"./selectors-MEKBT33G.js";import"./_baseEach-RnR0eTkf.js";function fs(n,s){var e=n.length;for(n.sort(s);e--;)n[e]=n[e].value;return n}var bs=fs,A=O;function hs(n,s){if(n!==s){var e=n!==void 0,o=n===null,d=n===n,i=A(n),c=s!==void 0,g=s===null,u=s===s,m=A(s);if(!g&&!m&&!i&&n>s||i&&c&&u&&!g&&!m||o&&c&&u||!e&&u||!d)return 1;if(!o&&!i&&!m&&n<s||m&&e&&d&&!o&&!i||g&&e&&d||!c&&d||!u)return-1}return 0}var xs=hs,js=xs;function Ls(n,s,e){for(var o=-1,d=n.criteria,i=s.criteria,c=d.length,g=e.length;++o<c;){var u=js(d[o],i[o]);if(u){if(o>=g)return u;var m=e[o];return u*(m=="desc"?-1:1)}}return n.index-s.index}var _s=Ls,E=$,Ss=D,Ms=V,ys=gs,ks=bs,Ps=H,Es=_s,ws=U,Ns=G;function As(n,s,e){s.length?s=E(s,function(i){return Ns(i)?function(c){return Ss(c,i.length===1?i[0]:i)}:i}):s=[ws];var o=-1;s=E(s,Ps(Ms));var d=ys(n,function(i,c,g){var u=E(s,function(m){return m(i)});return{criteria:u,index:++o,value:i}});return ks(d,function(i,c){return Es(i,c,e)})}var Cs=As,Ts=q,Bs=Cs,vs=K,C=R,Fs=vs(function(n,s){if(n==null)return[];var e=s.length;return e>1&&C(n,s[0],s[1])?s=[]:e>2&&C(s[0],s[1],s[2])&&(s=[s[0]]),Bs(n,Ts(s,1),[])}),Os=Fs;const Us=W(Os),$s=n=>n.map(s=>{const e=s.links.map(o=>({...o,isDisplayed:!1}));return{...s,links:e}}),v=()=>{const[{isLoading:n,menu:s},e]=j.useState({isLoading:!0,menu:[]}),o=z("useSettingsMenu",r=>r.checkUserHasPermissions),d=J("useSettingsMenu",r=>r.shouldUpdateStrapi),i=Z("useSettingsMenu",r=>r.settings),c=I(ps),g=j.useMemo(()=>Q(),[]),{admin:u,global:m}=X(g,async()=>(await Y(async()=>{const{SETTINGS_LINKS_EE:r}=await import("./strapi-D0ivxu6x.js").then(t=>t.jR);return{SETTINGS_LINKS_EE:r}},__vite__mapDeps([0,1]))).SETTINGS_LINKS_EE(),{combine(r,t){return{admin:[...t.admin,...r.admin],global:[...r.global,...t.global]}},defaultValue:{admin:[],global:[]}}),f=j.useCallback(r=>{if(!r.id)throw new Error("The settings menu item must have an id attribute.");return{...r,permissions:c.settings?.[r.id]?.main??[]}},[c.settings]);return j.useEffect(()=>{const r=async()=>{const F=await(L=>Promise.all(L.reduce((h,_,S)=>{const M=_.links.map(async(y,x)=>({hasPermission:(await o(y.permissions)).length>0,sectionIndex:S,linkIndex:x}));return[...h,...M]},[])))(w);e(L=>({...L,isLoading:!1,menu:w.map((h,_)=>({...h,links:h.links.map((S,M)=>{const y=F.find(x=>x.sectionIndex===_&&x.linkIndex===M);return{...S,isDisplayed:!!y?.hasPermission}})}))}))},{global:t,...l}=i,w=$s([{...t,links:Us([...t.links,...m.map(f)],b=>b.id).map(b=>({...b,hasNotification:b.id==="000-application-infos"&&d}))},{id:"permissions",intlLabel:{id:"Settings.permissions",defaultMessage:"Administration Panel"},links:u.map(f)},...Object.values(l)]);r()},[u,m,i,d,f,o]),{isLoading:n,menu:s.map(r=>({...r,links:r.links.filter(t=>t.isDisplayed)}))}},Gs=ts(is)`
  border-radius: 50%;
  padding: ${({theme:n})=>n.spaces[2]};
  height: 2rem;
`,T=({isFullPage:n=!1})=>{const{menu:s}=v(),{formatMessage:e}=B(),{trackUsage:o}=ss(),{pathname:d}=ns(),{license:i}=as(),c=i?.features.map(t=>t.name),g={"content-releases":"cms-content-releases","review-workflows":"review-workflows",sso:"sso",auditLogs:"audit-logs","auditLogs-purchase-page":"audit-logs"},m=s.filter(t=>!t.links.every(l=>l.isDisplayed===!1)).map(t=>({...t,title:t.intlLabel,links:t.links.map(l=>({...l,id:l.id,title:l.intlLabel,name:l.id,to:l.to.startsWith("/")?l.to:`/settings/${l.to}`}))})),f=e({id:"global.settings",defaultMessage:"Settings"}),r=t=>()=>{o("willNavigate",{from:d,to:t})};return a.jsxs(p.Main,{"aria-label":f,children:[!n&&a.jsxs(a.Fragment,{children:[a.jsx(p.Header,{label:f}),a.jsx(N,{})]}),a.jsxs(p.Content,{children:[n&&a.jsxs(a.Fragment,{children:[a.jsx(p.Header,{label:f}),a.jsx(N,{})]}),a.jsx(p.Sections,{children:m.map(t=>a.jsx(p.Section,{label:e(t.intlLabel),children:t.links.map(l=>a.jsx(p.Link,{to:l.to,onClick:r(l.to),label:e(l.intlLabel),endAction:a.jsxs(a.Fragment,{children:[l?.licenseOnly&&a.jsx(es,{fill:(c||[]).includes(g[l.id])?"primary600":"neutral300",width:"1.5rem",height:"1.5rem"}),l?.hasNotification&&a.jsx(Gs,{"aria-label":"Notification",backgroundColor:"primary600",textColor:"neutral0",children:"1"})]}),children:e(l.intlLabel)},l.id))},t.id))})]})]})},Ks=()=>{const n=rs("/settings/:settingId/*"),{formatMessage:s}=B(),{isLoading:e}=v(),o=os();return e?a.jsx(k.Loading,{}):n?.params.settingId?a.jsxs(cs.Root,{sideNav:a.jsx(T,{}),children:[a.jsx(k.Title,{children:s({id:"global.settings",defaultMessage:"Settings"})}),a.jsx(ds,{display:{initial:"block",medium:"none"},paddingLeft:P,paddingRight:P,paddingTop:P,children:a.jsx(us,{fallback:"/settings"})}),a.jsx(ms,{})]}):o?a.jsxs(a.Fragment,{children:[a.jsx(k.Title,{children:s({id:"global.settings",defaultMessage:"Settings"})}),a.jsx(p.PageWrapper,{children:a.jsx(T,{isFullPage:!0})})]}):a.jsx(ls,{to:"application-infos"})};export{Ks as Layout};
